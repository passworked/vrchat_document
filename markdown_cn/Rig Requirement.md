# Rig Requirements
#### 注意
此页面明显过时，但应该仍然大部分准确。

本页介绍了配置头像的绑定、骨骼和骨架的一些要求。如果您遵循这些要求，您的头像的肢体应该可以在 VRChat 中正确移动。

您还可以检查 [SDK 构建面板](https://creators.vrchat.com/avatars/creating-your-first-avatar#step-6---going-to-the-build-tab--checking-if-the-avatar-is-ok)并在 “Validations” 部分中查找错误。
## 导出设置
从您选择的 3D 编辑器导出装备时，请确保您的坐标设置正确。大多数情况下，默认值是正确的。

对于 Blender，请确保您的剩余 X 旋转为 90 度。

## 人形骨骼
如果 Humanoid 绑定配置不满足 Humanoid 的 Mecanim 要求，Unity 将标记该配置。请阅读并熟悉有关配置头像的 [Unity 文档](https://docs.unity3d.com/Manual/FBXImporter-Rig.html) 。
#### 人形头像必须映射头部、手部和脚部骨骼。
如果您的头像装备是人形的，但没有映射必要的骨骼，您将从 VRChat 构建控制面板看到此消息。
#### 非人类头像
如果您的头像与人类有很大差异（即四足动物、驼背怪物等），您应该考虑使用 Generic 绑定和您自己的动画控制器。有关示例，请参阅 SimpleAvatarController。这比制作人形更高级，因此您应该非常熟悉 Unity 的 动画器系统。
## 手指映射
#### 拇指、食指和中指骨骼未映射，全身追踪将被禁用

SDK 3 头像不会显示此警告，因为它们使用没有指骨的骨架没有问题。 此错误仅在使用 VRChat SDK2 时发生，VRChat SDK2 已弃用，不应使用。

为了获得完整的 IK（允许蹲伏和自动脚部放置），您需要映射这三个手指骨骼。如果您忽略此警告，您的虚拟形象将无法蹲下，并且它的脚不会自动踏步（除非您使用控制器运动）。

它还将阻止播放手势上的自定义动画覆盖。（SDK 中的警告目前未提及这一点。

## Spine 层次结构
您在人形骨骼中映射了Upperchest。这将导致 IK 出现问题。
SDK3 头像不会显示此警告，因为它们使用具有映射上胸部的骨架没有问题。 此错误仅在使用 VRChat SDK2 时发生，VRChat SDK2 已弃用，不应使用。
如果必须使用 SDK2，请在配置 humanoid 时将上胸骨留空。
#### Spine 层次结构缺少元素，请确保映射了 Pelvis、Spine、Chest、Neck 和 Shoulders。
这些骨骼都必须映射。如果您收到此消息，请确保这些槽都不是空的。请注意，Neck 和 Chest 插槽对于 Mecanim 是可选的，但对于 VRChat 来说是必需的。
#### Spine 层次结构不正确。确保 Shoulders 和 Neck 的父级都是 Chest。
要使 IK 正常工作，您必须在胸部周围具有特定的骨骼层次结构。在装备中，肩部骨骼（映射到左臂 > 肩部、右臂 > 肩部插槽）必须是胸骨（映射到身体 > 胸部插槽）的直接子项。此外，颈部骨骼（映射到 Head > Neck 插槽）也必须是 Chest 的直接子项。
## 臂和腿层次结构
## LowerArm 不是 UpperArm 的第一个子项，或者 Hand 不是 LowerArm 的第一个子项：您可能会遇到 Forearm 旋转的问题。
VRChat 的 IK 系统在确定骨骼布局时查看骨骼的第一个子项。如果您的装备中有其他子骨骼，例如道具放置骨骼或扭曲骨骼，它们可能会混淆 IK。在此特定情况下，SDK 会看到 LowerArm 不是 UpperArm 骨骼的第一个子项。
要解决此问题，请将子骨骼移动到父骨骼的子骨骼列表中的第一个位置。您必须解压缩 avatar prefab 才能执行此作。
请注意，此消息是命名插槽，而不是绑定中的实际骨骼名称，因此您必须查看该插槽中的骨骼。
#### LowerLeg 不是 UpperLeg 的第一个子类，或者 Foot 不是 LowerLeg 的第一个子类：您可能会遇到胫骨旋转的问题。
如上
## 一般层次结构
#### 此头像具有拆分的层次结构（Hips 骨骼不是所有类人骨骼的起点）。IK 可能无法正常工作。
一些骨骼会将层级结构划分为两个部分：上半身和下半身。在这种情况下，您放入 Body > Hips（身体 > 臀部） 插槽的骨骼，必须是您正在映射的其他人体骨骼的祖先骨骼（即它们的父级或更高层级）。
请特别小心这类装备！这类装备中的祖先骨骼通常是一个位于地面上的根骨骼或其他不适合作为臀部骨骼的位置。
这些装备中有很多并不适合用于 VRChat，需要重新进行绑定（re-rig）才能正常使用。
## 全身追踪
如果您使用的是 Full-Body tracking，则有一些特殊的注意事项，即。您已连接 3 个 HTC Tracking Puck。有几条建议可以确保您的头像在使用全身跟踪时运行良好。
要查看有关全身追踪索具要求的更多详细信息，请参阅我们的[全身追踪系统指南](https://docs.vrchat.com/docs/full-body-tracking) 。
## 骨盆和大腿骨之间的角度应接近 180 度（此头像的角度为 ___）。您的头像可能无法很好地与全身 IK 和跟踪配合使用。
全身追踪对髋骨和大腿骨之间的角度很敏感。最好在将 AvatarTPoseController 应用于您的头像时测量此角度。理想情况下，在 TPose 中，髋骨笔直向上，大腿骨笔直向下，但轻微的发散是可以的。如果您不打算使用 Full-Body Tracking，则可以忽略此消息。
## 脚趾骨
不需要在人形头像中映射脚趾骨骼。但是，如果您确实映射了他们，您的头像就可以踮起脚尖上下移动。映射脚趾还可以使自动脚步看起来更自然，并通过将自动站姿对齐到脚趾骨的起点而不是脚跟来改善平衡的外观。